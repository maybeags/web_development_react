## useEffect() ì •ë¦¬ í•¨ìˆ˜ë¥¼ í™œìš©í•œ ê²½ìŸ ì¡°ê±´ ì²˜ë¦¬

```tsx
import { useEffect, useState } from 'react';

function CarData(props) {
  const [ data, setData ] = useState({});
  
  useEffect(() => {
    let ignore = false;
    fetch(`https://carapi.com/car/${props.carid}`)
    .then(response => response.json())
    .then(cardata => {
      if (!ignore) {
        setData(cardata)
      }
    });

    return () => {
      ignore = true;
    };
  }, [props.carid]);

  if (data) {
    return <div>{data.car.brand}</div>
  } else {
    return null;
  }
}
... ì´í•˜ ìƒëµ ë° ì¶”í›„ ì‘ì„± ì˜ˆì •
```
- useEffect() ë‚´ë¶€ì— ì´ˆê¸°ê°’ì´ falseì¸ ignore ë³€ìˆ˜(bool)ë¥¼ ì„ ì–¸.
- ê·¸ ë‹¤ìŒ ì •ë¦¬ í•¨ìˆ˜ì—ì„œ ignore ë³€ìˆ˜ì˜ ê°’ì„ true ë°”ê¿”ì¤¬ìŠµë‹ˆë‹¤.
- ìƒíƒœ ì—…ë°ì´íŠ¸ ìƒì—ì„œ ignore ë³€ìˆ˜ì˜ ê°’ì„ í™•ì¸í•˜ê³ , ê°’ì´ falseì¸ ê²½ìš°ì—ë§Œ ìƒíƒœê°€ ì—…ë°ì´íŠ¸ë˜ëŠ”ë°, ì´ëŠ” ìƒˆë¡œìš´ ê°’ì´ props.caridë¥¼ êµì²´í•˜ì§€ ì•Šì•˜ê³ , íš¨ê³¼ê°€ ì •ë¦¬ë˜ì§€ ì•Šì•˜ìŒì„ ì˜ë¯¸í•¨.

- ì¦‰, í˜„ì¬ ì½”ë“œë¥¼ ì‘ì„±í–ˆì„ ê²½ìš° ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë  ë•Œë§ˆë‹¤ ì •ë¦¬í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê³  ignoreê°€ trueë¡œ ì—…ë°ì´íŠ¸ë˜ì–´ì„œ íš¨ê³¼ê°€ ì •ë¦¬ë¨. ì¦‰ ë§ˆì§€ë§‰ ìš”ì²­ì˜ ê²°ê³¼ë§Œ ë Œë”ë§ ë˜ë¯€ë¡œ ê²½ìŸ ì¡°ê±´ì„ í”¼í•  ìˆ˜ ìˆìŒ.

ê²½ìŸ ì¡°ê±´ ê³ ë ¤ ì•ˆí•œ ë²„ì „ì˜ ì½”ë“œ ë‚´ìš©

```jsx
import { useState, useEffect } from 'react';

function CarData(props) {
  const [data, setData] = useState({});

  useEffect(() => {
    fetch(`https://carapi.com/car/${props.carid}`)
    .then(response => response.json())
    .then(cardata => setData(cardata))
  }, [props.carid]);


  if (data) {
    return <div>{data.car.brand}</div>;
  }
  else {
    return null;
  }
  ...ì´í•˜ ìƒëµ ë‚˜ì¤‘ì— ë§Œë“¤ê²ë‹ˆë‹¤.
}
```

ê²½ìŸ ì¡°ê±´ì„ í”¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ë™ì‹œì„± ì œì–´ì™€ ê°™ì€ ì—¬ëŸ¬ ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•˜ëŠ” ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ë¥¼ ì´ìš©í• ê²ë‹ˆë‹¤. ì´ìƒì„ í†µí•´ ì£¼ì–´ì§„ ì¿¼ë¦¬ í‚¤ì— ëŒ€í•´ í•œ ë²ˆì— í•˜ë‚˜ì˜ ìš”ì²­ë§Œ ì „ì†¡í•˜ë„ë¡ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## React Query ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ìš©

ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±

npm create vite@4.3
gitapi
React
JavaScript

í´ë” ë„˜ì–´ê°€ì„œ
npm install

git add .
git commit -m "feat: 20250307 react query lesson"
git push

npm run dev


C:\ahngeunsu_react\gitapi>npm install axios
C:\ahngeunsu_react\gitapi>npm install @tanstack/react-query@4

ë‹¤ ì„¤ì¹˜í•˜ì‹  ë¶„ë“¤ì€ App.jsx ì´ˆê¸° ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤.

### React Queryì˜ ê°œìš”

#### React Queryë€?

: React ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì„œë²„ ìƒíƒœ ê´€ë¦¬ë¥¼ ì‰½ê²Œ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬

1. ê¸°ì¡´ ë°©ì‹(useState / useEffect) vs. React Query
ê¸°ì¡´ ë°©ì‹ ì˜ˆì‹œ
- useState / useEffectë¥¼ ì´ìš©í•´ API ìš”ì²­ ê´€ë¦¬ (ì–´ì œ ìˆ˜ì—…í–ˆìŠµë‹ˆë‹¤)
- ë§¤ë²ˆ API ìš”ì²­ì‹œ ë¡œë”© ìƒíƒœë¥¼ ìˆ˜ë™ìœ¼ë¡œ ê´€ë¦¬
- ìºì‹±ì„ ì§ì ‘ êµ¬í˜„í•´ì•¼ í•¨
- Refetchë¥¼ ì§ì ‘ ì½”ë“œë¡œ êµ¬í˜„í•´ì•¼ í•¨.

2. React Query
- useQuery í•˜ë‚˜ë¡œ ë°ì´í„° ìš”ì²­ ê°€ëŠ¥
- isLoading, isFetching ë“±ì˜ ìƒíƒœë¥¼ ìë™ìœ¼ë¡œ ì œê³µ
- ìë™ ìºì‹± ë° ë°±ê·¸ë¼ìš´ë“œ ì—…ë°ì´íŠ¸
- staleTime, refetchOnWindowFocus ë“± ì˜µì…˜ ì œê³µ

ê¸°ëŠ¥ìƒ íŠ¹ì§•
- ìë™ ìºì‹± ë° ë°±ê·¸ë¼ìš´ë“œ ì—…ë°ì´íŠ¸ : ë°ì´í„°ê°€ ì˜¤ë˜ë˜ì—ˆëŠ”ì§€ ìë™ìœ¼ë¡œ íŒë‹¨, ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìë™ ì—…ë°ì´íŠ¸ë¥¼ ì‹¤í–‰

ex) staleTimeì„ ì„¤ì •í•˜ì—¬ ì¼ì • ì‹œê°„ ë™ì•ˆ ë°ì´í„° ìš”ì²­ì„ ë°©ì§€í•˜ì—¬ ì„±ëŠ¥ ìµœì í™”

- íŠ¹ì • ì´ë²¤íŠ¸ì—ì„œ ë°ì´í„° ìƒˆë¡œê³ ì¹¨(refetch) : ë²„íŠ¼ í´ë¦­ ì‹œ ë°ì´í„°ë¥¼ ìƒˆë¡œ ë¶ˆëŸ¬ì˜¤ë ¤ë©´ refetch í•¨ìˆ˜ ì‚¬ìš© ê°€ëŠ¥ -> refetch() í˜¸ì¶œ ì‹œ ê¸°ì¡´ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì§€ ì•Šê³  ë‹¤ì‹œ ê°€ì ¸ì˜´

- ìœˆë„ìš° í¬ì»¤ìŠ¤ ì‹œ ìë™ ìƒˆë¡œê³ ì¹¨ : ì‚¬ìš©ìê°€ ë¸Œë¼ìš°ì € íƒ­ì„ ë‹¤ì‹œ í™œì„±í™”í•˜ë©´ ë°ì´í„°ê°€ ìƒˆë¡œê³ ì¹¨ë˜ëŠ”ë°, ì´ ê¸°ëŠ¥ì´ í•„ìš” ì—†ëŠ” ê²½ìš° refetchOnWindowFocus: falseë¥¼ ì‚¬ìš©í•˜ë©´ ë˜ëŠ” ë“±ì˜ ì¶”ê°€ ì˜µì…˜

- ê°„ë‹¨í•œ API í˜¸ì¶œ ì½”ë“œ : ë¶ˆí•„ìš”í•œ ìƒíƒœ ë³€ìˆ˜ë¥¼ ì—†ì• ê³ , ê°€ë…ì„±ì´ ì¦ì§„ë¨.

#### ì‹¤ìŠµ íŒŒíŠ¸ì—ì„œ

- ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ëŠ” ë°ì´í„° ìºì‹±ì„ ì²˜ë¦¬í•˜ëŠ” QueryClientProviderì™€ QueryClient ì»´í¬ë„ŒíŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
QueryClient ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±(function App ì™¸ë¶€ì—ì„œ)í•˜ê³ , App ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ QueryClientProviderë¥¼ ë Œë”ë§í–ˆìŠµë‹ˆë‹¤.

- ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ ì‚¬ìš©ì„ ìœ„í•´ì„œëŠ” importê°€ í•„ìš”í•©ë‹ˆë‹¤(axios ë•Œì²˜ëŸ¼).

```jsx
import './App.css'
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'

const queryClient = new QueryClient();

function App() {

  return (
    <>
      <QueryClientProvider client={queryClient}>
        
      </QueryClientProvider>
    </>
  )
}

export default App
```

ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì—ì„œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ í˜¸ì¶œí•˜ëŠ” ë° ì´ìš©ë˜ëŠ” useQuery í›… í•¨ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤.

í˜•ì‹ :

```jsx
const query = useQuery({ queryKey: ['repositories'], queryFn: getRepositories })
```

* ìœ ì˜ ì‚¬í•­
- queryKeyëŠ” ì¿¼ë¦¬ë¥¼ ìœ„í•œ ê³ ìœ í•œ í‚¤ë¡œ ë°ì´í„°ì˜ ìºì‹±ê³¼ ë‹¤ì‹œ ê°€ì ¸ì˜¤ê¸°ì— ì´ìš©.
- queryFnì€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜ì´ë©° 'í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜'í•´ì•¼ í•œë‹¤.

useQuery í›…ì´ ë°˜í™˜í•˜ëŠ” query ê°ì²´ì—ëŠ” ì¿¼ë¦¬ ìƒíƒœì™€ ê°™ì€ ì¤‘ìš” ì†ì„±ì´ í¬í•¨ë¼ ìˆìŠµë‹ˆë‹¤.

í˜•ì‹ :

```jsx
const { isLoading, isError, isSuccess } = useQuery({ queryKey: ['repositories'], queryFn: getRepositories })
```

ê°ì²´ì˜ êµ¬ì¡° ë¶„í•´ í˜•íƒœë¡œ ì„¤ëª…í–ˆìŠµë‹ˆë‹¤ -> ì´ìƒì˜ ì½”ë“œê°€ í•´ì„ë˜ì–´ì•¼ë§Œ í•©ë‹ˆë‹¤.

- isLoading : ë°ì´í„°ë¥¼ ì•„ì§ ì´ìš©í•  ìˆ˜ ì—†ìŒ
- isError : ì¿¼ë¦¬ê°€ ì˜¤ë¥˜ë¡œ ì¢…ë£Œ
- isSuccess : ì¿¼ë¦¬ê°€ ì„±ê³µì ìœ¼ë¡œ ì¢…ë£Œë˜ì—ˆìœ¼ë©° ì¿¼ë¦¬ ë°ì´í„°ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŒ

ê·¸ë˜ì„œ ì´ìƒì˜ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ Github ì˜ˆì œë¥¼ ì‘ìš©í•˜ê² ìŠµë‹ˆë‹¤.

ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ì»´í¬ë„ŒíŠ¸ì¸ Repositories.jsx íŒŒì¼ ìƒì„±


```jsx
import { useQuery } from "@tanstack/react-query";
import axios from "axios";

function Repositories() {

  const getRepositories = async () => {
    const response = await axios.get(`https://api.github.com/search/repositories?q=react`);
    return response.data.items;
  }

  const { isLoading, isError, data } = useQuery({
    queryKey: ['repositories'],
    queryFn: getRepositories,
  });

  //ì¡°ê±´ë¶€ ë Œë”ë§ ë¶€ë¶„ êµ¬í˜„ : ë°ì´í„°ë¥¼ ì´ìš©í•  ìˆ˜ ìˆì„ ë•Œ ë Œë”ë§
  // REST API í˜¸ì¶œì´ ì˜¤ë¥˜ë¡œ ëë‚˜ëŠ” ê²½ìš° ë©”ì‹œì§€ ë Œë”ë§

  if (isLoading) {
    return <p>ë¡œë”© ì¤‘ ... â³</p>
  }

  if (isError) {
    return <p>ì˜¤ë¥˜ ë°œìƒí–ˆìŠµë‹ˆë‹¤ ğŸ˜…</p>
  }
  else {
    return(
      <table>
        <tbody>
          {
            data.map(repo => 
              <tr key={repo.id}>
                <td>{repo.full_name}</td>
                <td>
                  <a href={repo.html_url}>{repo.html_url}</a>
                </td>
              </tr>)
          }
        </tbody>
      </table>
    );
  }
}

export default Repositories;
```

ì´ìƒì˜ ì½”ë“œì—ì„œ ì €í¬ê°€ ì£¼ëª©í•´ì•¼ í•  ì ì€ :

ë”ì´ìƒ App.jsxì— í•œ ë²ˆì— ì „ë¶€ ë‹¤ ì“°ì§€ ì•Šê³ , í•„ìš” ê¸°ëŠ¥ì„ Componentë¡œ ë¶„í• í–ˆë‹¤ëŠ” ì 

ê·¸ë¦¬ê³  Repositoriesë¼ëŠ” Component ìì²´ë¥¼ App.jsxì— ì§‘ì–´ë„£ì—ˆìŠµë‹ˆë‹¤.

component1,2,3,4,5 ì´ë ‡ê²Œ ìƒì„±í•´ì„œ App.jsxì— ë„£ê¸°ë§Œ í•˜ë©´ -> ì €í¬ëŠ” ì—¬íƒœê¹Œì§€ App.jsxë¥¼ ë§Œë“¤ì—ˆë‹¤ë³´ë‹ˆê¹Œ main.jsxì— í•˜ë‚˜í•˜ë‚˜ ë‹¤ ì§‘ì–´ë„£ì–´ì™”ì—ˆìŠµë‹ˆë‹¤.

ì´ì œ ì €í¬ëŠ” ì „ì²´ App.jsx ë‚´ì— êµ¬ì—­êµ¬ì—­ì„ Componentë“¤ë¡œ ì±„ì›Œë„£ëŠ” ë°©ì‹ì„ ì—°ìŠµí•´ë‚˜ê°ˆ ì˜ˆì •ì…ë‹ˆë‹¤(ê·¸ ê³¼ì •ì—ì„œ ë‹¤ì–‘í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ìš©ì„ í•  ê±°êµ¬ìš”.).

- ê·¸ë¦¬ê³  ì´ìƒì˜ ì•±ì€ ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•´ì„œ ë¦¬í¬ì§€í† ë¦¬ ì •ë³´ë“¤ì„ ê°€ì§€ê³  ì˜¤ê³ , ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ ë‚´ì¥ ê¸°ëŠ¥ì„ ì´ìš©í•˜ì—¬ ìš”ì²­ ìƒíƒœë¥¼ ì‰½ê²Œ(useStateë¥¼ ì“¸ ë•Œë³´ë‹¤) ì²˜ë¦¬í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ê°€ ë°ì´í„° ê´€ë¦¬ì™€ ìºì‹±ì„ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì— ì‘ë‹µ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ìƒíƒœ(data, setData)ê°€ í•„ìš”í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

ì—¬ëŸ¬ë¶„ë“¤ì˜ ë³µìŠµ í¬ì¸íŠ¸ëŠ” githubapiappê³¼ gitapiì˜ ì½”ë“œ ìƒì˜ ì°¨ì´ì ì´ ë˜ê² ìŠµë‹ˆë‹¤.

- ê°œë°œì ë„êµ¬ì˜ Network íƒ­ì—ì„œ ìƒˆì°½ê³¼ ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ ì°½ì„ ì™”ë‹¤ê°”ë‹¤ í•´ë³´ë©´ ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì— ì˜í•´ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ê¸°ê°€ ì‹¤í–‰ëœë‹¤ëŠ” ì ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰ ë¸Œë¼ìš°ì €ì— í¬ì»¤ìŠ¤ë¥¼ ë§ì¶œ ë•Œë§ˆë‹¤(ë¦¬ì•¡íŠ¸ ì•±ìœ¼ë¡œ ì°½ì´ ë„˜ì–´ê°ˆ ë•Œë§ˆë‹¤) ì—…ë°ì´íŠ¸ëœ ë°ì´í„°ë¥¼ ë³¼ ìˆ˜ ìˆëŠ” ì¢‹ì€ ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì´ ê¸°ë³¸ ì‘ë™ì„ ì „ì—­ì ìœ¼ë¡œ í˜¹ì€ ì¿¼ë¦¬ë³„ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* ì°¸ê³  ì‚¬í•­ : ë„¤íŠ¸ì›Œí¬ê°€ ë‹¤ì‹œ ì—°ê²°ë˜ê±°ë‚˜ ì¿¼ë¦¬ì˜ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ê°€ ë§ˆìš´íŠ¸ë  ë•Œ(ì»´í¬ë„ŒíŠ¸ê°€ DOMì— ì‚½ì…ë  ë•Œ) ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ê¸°ë„ ìë™ìœ¼ë¡œ ì‹¤í–‰ë¨.

#### ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì˜ ì¶”ê°€ í•µì‹¬ ì†ì„±ë“¤
- staleTime : ë°ì´í„°ê°€ ìµœì‹ ìœ¼ë¡œ ìœ ì§€ë˜ëŠ” ì‹œê°„ì„ ê·œì • -> í•´ë‹¹ ì‹œê°„ì„ ë„˜ê¸°ë©´ ì˜¤ë˜ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼ë˜ì–´ ë°±ê·¸ë¼ìš´ë“œë¡œ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ê²Œ ë¨. default ê°’ì€ 0ì´ë©° ì´ëŠ” ì¿¼ë¦¬ ì„±ê³µ ì§í›„ ë°ì´í„°ê°€ ìµœì‹ ì´ ì•„ë‹Œ ìƒíƒœê°€ ëœë‹¤ëŠ” ì˜ë¯¸. ê·¸ë˜ì„œ ë°ì´í„°ê°€ ìì£¼ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ê²½ìš° staleTime ê°’ì„ ì„¤ì •í•˜ë©´ ë¶ˆí•„ìš”í•œ ë‹¤ì‹œ ê°€ì ¸ì˜¤ê¸°ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì ìš© ì‚¬ë¡€
```jsx
  const { isLoading, isError, data } = useQuery({
    queryKey: ['repositories'],
    queryFn: getRepositories,
    staleTime: 60 * 1000, // ë°€ë¦¬ì´ˆ ë‹¨ìœ„ì´ê¸° ë•Œë¬¸ì— 1ë¶„ì„ ì˜ë¯¸í•¨.
  });
```

- cacheTime : ë¹„í™œì„± ìƒíƒœì¸ ì¿¼ë¦¬ë“¤ì´ gabarge collection ëŒ€ìƒì´ ë˜ëŠ” íƒ€ì´ë°ì„ ëª…ì‹œí•¨. defaultë¡œëŠ” 5ë¶„

#### useMutation Hook

: ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ ìƒì—ì„œ ë‚´ì¥ëœ ì˜¤ë¥˜ ì²˜ë¦¬, ìºì‹œ ë¬´íš¨í™”ì™€ í•¨ê»˜ ë°ì´í„° ìƒì„±, ì—…ë°ì´íŠ¸, ì‚­ì œë¥¼ ìœ„í•œ Hook -> ë°ì´í„° ë³€ê²½(Mutation) ì²˜ë¦¬ë¥¼ ê°„ì†Œí™”í•  ìˆ˜ ìˆë„ë¡ í•¨.

ì˜ˆë¥¼ ë“¤ì–´ ìƒˆ ìë™ì°¨ë¥¼ ì¶”ê°€í•˜ê³  ì‹¶ê¸° ë•Œë¬¸ì— POSTì— í•´ë‹¹í•˜ëŠ” HTTP methodë¥¼ ì´ìš©í•œë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„± ê°€ëŠ¥í•©ë‹ˆë‹¤.

```jsx
// ì“¸ê±°ë¼ì„œ import -> ê¹Œë¨¹ìœ¼ë©´ ì•ˆë©ë‹ˆë‹¤
import { useMutation } from '@tanstack/react-query';
import axios from "axios";

// ì‚¬ìš©ë²•
const mutation = useMutation({
  mutationFn: (newCar) => {
    return axios.post(`api/cars`, newCar);  //ì´ê±° ì˜¤íƒ€
  },
  onError: (error, variables, context) => {
    //ë³€ê²½ ì˜¤ë¥˜ì™€ ê´€ë ¨ëœ ë¶€ë¶„ ì²˜ë¦¬
    // ì˜ˆë¥¼ ë“¤ì–´ console.log(error);
  },
  onSuccess: (data, variables, context) => {
    //ë³€ê²½ ì„±ê³µê³¼ ê´€ë ¨ëœ ë¶€ë¶„ ì²˜ë¦¬
  },
});
```
ì´ìƒì˜ ì˜ˆì œì—ì„œì˜ ì½”ë“œ ì„¤ëª…
- mutationFn : í•´ë‹¹ keyì˜ ì†ì„±ê°’ì€ ì„œë²„ì— POST ìš”ì²­ì„ ìˆ˜í–‰í•˜ê³ , 'í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜'
- onSuccess / onError : ì„±ê³µì‹œ/ì‹¤íŒ¨ì‹œ ì ìš© í•¨ìˆ˜

```jsx
mutation.mutate(newCar);  // ì € ìœ„ì— ì½”ë“œì™€ í•©ì³ì„œ ê°ì²´ëª….ë©”ì„œë“œëª…(argument); í˜•íƒœë¡œ ì‹¤í–‰í–ˆë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.
```
ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ë³€ê²½ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.