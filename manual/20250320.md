# useReducer / useContext í™œìš© ì˜ˆì œ

## useReducerì˜ ë¬¸ì œì 

: props drilling ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆë‹¤.
![drilling01](./drilling.webp)

ì–´ì œ ì €í¬ê°€ ì‘ì„±í•œ ì˜ˆì œì—ì„œ LoginForm ì»´í¬ë„ŒíŠ¸ì—ì„œ stateì™€ dispatchë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ App ì»´í¬ë„ŒíŠ¸ì—ì„œë¶€í„° propsë¡œ ê°’ì„ ë‚´ë ¤ë³´ë‚´ì¤˜ì•¼ í–ˆìŠµë‹ˆë‹¤.

```jsx
function App() {

  const [ state, dispatch ] = useReducer(Reducer, { isLogin: false, message : '', })  // ì—¬ê¸°ì„œ ì„ ì–¸í–ˆê³ 

  return (
    <div>
      {state.isLogin ? (
        <>
          <strong>welcome ğŸˆ</strong>
          <button onClick={() => dispatch({type: "LOGOUT"})}>ë¡œê·¸ì•„ì›ƒ</button>
        </>
      ) : (
        <LoginForm state={state} dispatch={dispatch} />   // ì—¬ê¸°ë¡œ ë‚´ë ¤ë³´ë‚´ì¤€ ê²ƒì„ ì´ë¯¸ì§€í™”í–ˆìŠµë‹ˆë‹¤.
      )}
    </div>
  );
}
```

ì´ìƒì˜ ì½”ë“œê°€ App ì»´í¬ë„ŒíŠ¸ì—ì„œ useReducerë¥¼ í†µí•´ ìƒì„±í•œ state / dispatchë¥¼ LoginFormì´ë¼ëŠ” ìì‹ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬í•œ ì½”ë“œ ì‚¬ë¡€ì— í•´ë‹¹í•©ë‹ˆë‹¤.
ê·¸ë ‡ë‹¤ë©´ ìƒíƒœê´€ë¦¬ë„ í•˜ë©´ì„œ props drillingì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ ì–´ë–¡í•´ì•¼ í• ê¹Œ?
-> useContextë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

![drilling02](./drilling02.webp)

ì´ìƒì˜ ì´ë¯¸ì§€ëŠ” props drillingì˜ ëŒ€í‘œì ì€ ë„ì‹í™”ì— í•´ë‹¹í•©ë‹ˆë‹¤. ì¦‰ ë‹¨ê³„ì ìœ¼ë¡œ ì¼ì¼ì´ propsë¥¼ ë„˜ê²¨ì¤Œìœ¼ë¡œì¨ í•´ë‹¹ propsë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì»´í¬ë„ŒíŠ¸ ë“¤ì—ë„ ë°ì´í„°ê°€ ì œê³µë˜ëŠ” ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.

ë‹¤ë§Œ ì €í¬ëŠ” ë¶€ëª¨ì—ì„œ ì •ì˜í•˜ê³  ë°”ë¡œ ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.


```jsx
import { createContext, useReducer } from "react";
import Reducer from "../reducer/Reducer";

const INITIAL_STATE = { isLogin: false, message: '' };

export const Context = createContext(INITIAL_STATE);

export const ContextProvider = ({ children }) => {
  const [state, dispatch] = useReducer(Reducer, INITIAL_STATE);

  return(
    <Context.Provider
      value= {{
        state,
        dispatch,
      }}
    >
      {children}
    </Context.Provider>
  );
}

export default Context;
```

useContextì˜ ì‚¬ìš©ì„ ìœ„í•´ Context.jsxì— ì´ìƒê³¼ ê°™ì´ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.
ì´ˆê¸°ê°’ìœ¼ë¡œ ë“¤ì–´ê°ˆ ìƒíƒœë¥¼ INITIAL_STATEë¼ëŠ” ìƒìˆ˜ ì´ë¦„ì— ëŒ€ì…í–ˆìŠµë‹ˆë‹¤.
createContext ì•ˆì— ë„£ì–´ì„œ, Context ê°ì²´ë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤.

ContextProvider ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•˜ê³  useReducer ì•ˆì— ì²« ë²ˆì§¸ argumentë¡œ reducer í•¨ìˆ˜(Reducer), ë‘ ë²ˆì§¸ argumentë¡œ INITIAL_STATEë¥¼ ë„£ì–´ì„œ ì „ë‹¬í•©ë‹ˆë‹¤(provider).

ContextProvider ì»´í¬ë„ŒíŠ¸ëŠ” Context.Providerë¥¼ ë°˜í™˜í•˜ëŠ”ë°, value ì†ì„±ì„ í†µí•´ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬í•  ê°’ì„ ì§€ì •í•´ì¤¬ìŠµë‹ˆë‹¤.

![drillingContext](./drillingContext.webp)